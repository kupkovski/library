<% content_for :title, "Books" %>
<h1>Books</h1>

<%= form_tag(search_books_path, :method => "get") do %>
  <div class="grid">

    <%= search_field_tag(:q, params[:q], placeholder: "Search by title, author name or genre") %>
    <%= submit_tag("Search") %>
  </div>
<% end %>


<% if params[:q].present? && @books.blank? %>
  <h3>No records found.</h3>
<% end %>

<div id="books">
  <table>
    <thead>
      <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Genre</th>
        <th>ISBN</th>
        <th>Total Copies</th>
      </tr>
    </thead>
    <tbody>
      <% @books.each do |book| %>
        <tr>
          <td><%= link_to book.title, book %></td>
          <td><%= book.author_name %></td>
          <td><%= book.genre %></td>
          <td><%= book.isbn %></td>
          <td><%= book.total_copies %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= link_to "New book", new_book_path %>
